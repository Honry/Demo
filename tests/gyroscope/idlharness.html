<!DOCTYPE html>
<meta charset="utf-8">
<title>Gyroscope Sensor IDL tests</title>
<link rel="author" title="Intel" href="http://www.intel.com">
<link rel="help" href="http://www.w3.org/TR/gyroscope/">
<script src="../resources/testharness.js"></script>
<script src="../resources/testharnessreport.js"></script>
<script src="../resources/WebIDLParser.js"></script>
<script src="../resources/idlharness.js"></script>
<style>
  pre {
    display: none;
  }
</style>
<div id="log"></div>

<pre id="idl">
interface Event {
};

interface Error {
};

dictionary EventInit {
};
</pre>

<pre id="generic-idl">
interface Sensor : EventTarget {
  readonly attribute SensorState state;
  readonly attribute SensorReading? reading;
  void start();
  void stop();
  attribute EventHandler onchange;
  attribute EventHandler onstatechange;
  attribute EventHandler onerror;
};

dictionary SensorOptions {
  double? frequency;
};

enum SensorState {
  "idle",
  "activating",
  "active",
  "errored"
};

interface SensorReading {
  readonly attribute DOMHighResTimeStamp timeStamp;
};

[Constructor(DOMString type, SensorReadingEventInit eventInitDict)]
interface SensorReadingEvent : Event {
  readonly attribute SensorReading reading;
};

dictionary SensorReadingEventInit : EventInit {
  SensorReading reading;
};

[Constructor(DOMString type, SensorErrorEventInit errorEventInitDict)]
interface SensorErrorEvent : Event {
  readonly attribute Error error;
};

dictionary SensorErrorEventInit : EventInit {
  Error error;
};
</pre>

<pre id="gyroscope-idl">
[Constructor(optional SensorOptions sensorOptions)]
interface GyroscopeSensor : Sensor {
  readonly attribute GyroscopeSensorReading? reading;
};

[Constructor(GyroscopeSensorReadingInit GyroscopeSensorReadingInit)]
interface GyroscopeSensorReading : SensorReading {
    readonly attribute unrestricted double rotationRateX;
    readonly attribute unrestricted double rotationRateY;
    readonly attribute unrestricted double rotationRateZ;
};
  
dictionary GyroscopeSensorReadingInit {
    unrestricted double rotationRateX = 0;
    unrestricted double rotationRateY = 0;
    unrestricted double rotationRateZ = 0;
};
</pre>

<script>
(function() {
  "use strict";
  var idl_array = new IdlArray();
  idl_array.add_untested_idls(document.getElementById('idl').textContent);
  idl_array.add_untested_idls(document.getElementById('generic-idl').textContent);
  idl_array.add_idls(document.getElementById('gyroscope-idl').textContent);

  idl_array.add_objects({
    GyroscopeSensor: ['new GyroscopeSensor();'],
    GyroscopeSensorReading: ['new GyroscopeSensorReading({rotationRateX: 0.5, rotationRateY: 0.5, rotationRateZ: 0.5});'],
    SensorReadingEvent: ['new SensorReadingEvent("reading", { reading: new GyroscopeSensorReading({rotationRateX: 0.5, rotationRateY: 0.5, rotationRateZ: 0.5}) });']
  });

  idl_array.test();
})();
</script>


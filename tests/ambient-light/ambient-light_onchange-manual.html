<!DOCTYPE html>
<meta charset="utf-8">
<title>AmbientLightSensor Test: onchange</title>
<link rel="author" title="Intel" href="http://www.intel.com">
<link rel="author" title="Xiuqi Jiang" href="mailto:xiuqix.jiang@intel.com">
<link rel="help" href="https://www.w3.org/TR/ambient-light/">
<link rel="help" href="https://w3c.github.io/sensors/releases/WD-generic-sensor-20160830.html#sensor-onchange">
<script src="../resources/testharness.js"></script>
<script src="../resources/testharnessreport.js"></script>

<h2>Description</h2>
<p>
  This test validates that the "onchange" event can be invoked when changing the ambient light level of the device.
</p>

<h2>Precondition</h2>
<ol>
  <li>
    Change the ambient light level of the device.
  </li>
</ol>

<script>

async_test(function (t) {
  let sensor = new AmbientLightSensor();

  sensor.start();

  sensor.onchange = t.step_func_done(function(event) {
    sensor.stop();
    assert_true(true);
  });

  sensor.onerror = t.step_func_done(function(event) {
    assert_unreached(event.error.name + ":" + event.error.message);
  });
}, "event change fired");

</script>
